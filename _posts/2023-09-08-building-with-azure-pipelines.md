---
title: "Building with Azure Pipelines"
date: 2023-09-08T15:00:00Z
image: /images/post/azuredevops.png
categories: 
    - devops
    - azure
    - pipelines
featured: false
draft: true
---

Welcome to the fourth post in our Azure DevOps series. Today, we'll be exploring Azure Pipelines, a powerful tool for building and testing your code.

Building and testing your code is an essential part of software development. It ensures that your code is free of errors, meets the quality standards, and is ready for deployment. However, building and testing your code manually can be time-consuming, error-prone, and inconsistent.

That's where Continuous Integration (CI) comes in. CI is a practice that involves automating the building and testing of your code every time you make a change. CI helps you catch bugs early, improve code quality, and speed up the delivery process.

Azure Pipelines is a tool that enables you to implement CI for your project. It allows you to create automated workflows, called pipelines, that build and test your code whenever you push a change to your repository. Azure Pipelines supports any language, platform, and cloud, making it a versatile and flexible tool for your project.

In this post, we'll cover the basics of CI, how to create a build pipeline in Azure Pipelines, how to manage build artifacts, and some best practices for building with Azure Pipelines.

By the end of this post, you'll have a solid understanding of how to use Azure Pipelines to build and test your code efficiently and effectively. Let's get started!

## Understanding Continuous Integration

Continuous Integration (CI) is a practice that involves automating the building and testing of your code every time you make a change. CI helps you catch bugs early, improve code quality, and speed up the delivery process.

The idea behind CI is simple: instead of waiting until the end of the development cycle to integrate and test your code, you do it continuously throughout the process. This way, you can detect and fix errors as soon as they occur, rather than letting them pile up and cause bigger problems later.

CI has many benefits for software development teams, such as:

- **Reduced Errors**: By building and testing your code frequently, you can identify and resolve errors quickly, before they affect other parts of the system or reach the end users.
- **Improved Quality**: By enforcing coding standards, code reviews, and automated tests, you can ensure that your code meets the quality criteria and follows the best practices.
- **Faster Feedback**: By getting immediate feedback on your code changes, you can make adjustments and improvements faster, leading to better customer satisfaction and retention.
- **Increased Collaboration**: By integrating your code with other developers' code regularly, you can avoid merge conflicts and ensure that everyone is working on the same version of the code.

To implement CI for your project, you need a tool that can automate the building and testing of your code. That's where Azure Pipelines comes in. Azure Pipelines is a tool that enables you to create automated workflows, called pipelines, that build and test your code whenever you push a change to your repository. Azure Pipelines supports any language, platform, and cloud, making it a versatile and flexible tool for your project.

## Getting Started with Azure Pipelines

Azure Pipelines is a tool that enables you to create automated workflows, called pipelines, that build and test your code whenever you push a change to your repository. Azure Pipelines supports any language, platform, and cloud, making it a versatile and flexible tool for your project.

To use Azure Pipelines, you need to have an Azure DevOps account and a project. If you don't have one yet, you can follow our previous post on how to set up an Azure DevOps account.

Once you have an Azure DevOps account and a project, you can start creating pipelines. There are two types of pipelines in Azure DevOps: build pipelines and release pipelines.

**Build Pipelines** are responsible for building your code and producing artifacts. Artifacts are files that are generated by your build process, such as executable files, libraries, or packages. You can use artifacts to deploy your code to different environments or stages.

**Release Pipelines** are responsible for deploying your artifacts to different environments or stages. Environments are the places where your code runs, such as development, testing, staging, or production. Stages are the steps that define the deployment process for each environment, such as approval, validation, or configuration.

In this post, we'll focus on creating a build pipeline for a simple web application. In the next post, we'll cover how to create a release pipeline to deploy the web application to different environments.

If you want to use a simple application to try this out with, feel free to clone the repo at [https://github.com/iamskratsch/SampleASPNET](https://github.com/iamskratsch/SampleASPNET)

Let's get started!

## Creating a Build Pipeline

A build pipeline is a workflow that automates the building and testing of your code. It consists of a series of tasks that run whenever you push a change to your repository. A task is a unit of work that performs a specific action, such as compiling your code, running tests, or publishing artifacts.

To create a build pipeline in Azure Pipelines, follow these steps:

1. In Azure DevOps, navigate to your project and click on **Pipelines** in the left-hand menu.
2. Click on the **Create Pipeline** button.
3. Choose where your code is located. For this example, we'll choose Azure Repos Git.
4. Select the repository that contains your code.
5. Choose a template for your pipeline. A template is a predefined set of tasks that suit a specific scenario, such as ASP.NET Core, Node.js, or Python. For this example, we'll choose ASP.NET Core.
6. Review and edit the pipeline configuration. The pipeline configuration is written in YAML, a human-readable data format. You can modify the configuration to suit your needs, such as adding or removing tasks, changing parameters, or setting triggers.
7. Click on **Save and run** to save the pipeline and run it for the first time.

You can monitor the progress of your pipeline in the Pipelines hub. You can see the status of each task, view the logs, and download the artifacts.

![Pipeline Run Result](/images/post/ado_pipelinerun.png)

By creating a build pipeline in Azure Pipelines, you can automate the building and testing of your code, ensuring that your code is always in a good state and ready for deployment. In the next section, we'll discuss how to manage build artifacts in Azure Pipelines.

## Managing Build Artifacts

Build artifacts are files that are generated by your build process, such as executable files, libraries, or packages. You can use artifacts to deploy your code to different environments or stages.

To manage build artifacts in Azure Pipelines, you need to do two things: publish and consume.

### Publishing Artifacts

Publishing artifacts means uploading them from your local machine or build agent to a storage location, such as Azure Artifacts, Azure Storage, or a file share. You can publish artifacts as part of your build pipeline using the Publish Pipeline Artifact task or the Publish Build Artifact task.

To publish artifacts in your build pipeline, follow these steps:

1. In Azure DevOps, navigate to your project and click on **Pipelines** in the left-hand menu.
2. Select the build pipeline that you want to edit.
3. Click on the **Edit** button.
4. In the pipeline editor, add a new task by clicking on the **+** button.
5. Search for "Publish Pipeline Artifact" or "Publish Build Artifact" and select the task.
6. Configure the task parameters, such as the artifact name, path, and destination.
7. Click **Save and queue** to save the pipeline and run it.

![Azure Pipeline Publish](/images/post/ado_pipelinepublish.png)

### Consuming Artifacts

Consuming artifacts means downloading them from a storage location to your local machine or release agent. You can consume artifacts as part of your release pipeline using the Download Pipeline Artifact task or the Download Build Artifact task.

To consume artifacts in your release pipeline, follow these steps:

1. In Azure DevOps, navigate to your project and click on **Releases** in the left-hand menu.
2. Select the release pipeline that you want to edit.
3. Click on the **Edit** button.
4. In the release editor, select the stage where you want to consume the artifacts.
5. Add a new task by clicking on the **+** button.
6. Search for "Download Pipeline Artifact" or "Download Build Artifact" and select the task.
7. Configure the task parameters, such as the artifact source, name, and destination.
8. Click **Save** to save the pipeline.

![Azure Pipelines Download Artifact](/images/post/ado_pipelinedownload.png)

By managing build artifacts in Azure Pipelines, you can ensure that your code is packaged and delivered consistently and reliably across different environments or stages. In the next section, we'll share some best practices for building with Azure Pipelines.

## Best Practices for Building with Azure Pipelines

When structuring your Azure Pipelines, it's important to keep a few key principles in mind. First, **modularity** is crucial. Break down your pipeline into smaller, reusable components. This not only makes your pipeline easier to understand and maintain, but it also allows you to reuse code and quickly adapt to changes.

Second, **consistency** across your pipelines can save you a lot of headaches in the long run. Try to establish a standard way of defining your pipelines and stick to it. This will make it easier for others to understand your pipelines and contribute to them.

Lastly, consider the **granularity** of your pipelines. While it might be tempting to create a single pipeline for your entire application, this can lead to long build times and difficulty isolating issues. Instead, consider creating multiple smaller pipelines that can run in parallel.

## Best Practices for Managing Pipeline Configuration and Secrets

In Azure DevOps, managing pipeline configuration and secrets are critical aspects of setting up your CI/CD workflows.

Below you'll find some best practices to follow:

1. **Use Variables**: Variables in Azure Pipelines can be used to store values that you want to use in your pipeline. You can define variables at the pipeline level, at the stage level, or at the job level.

2. **Leverage Variable Groups**: For managing configurations that are used across multiple pipelines, you can use variable groups. Variable groups are a collection of variables that you can access across multiple pipelines. They are stored as objects in Azure DevOps and can be linked to an Azure Key Vault.

3. **Secure Secrets with Azure Key Vault**: Secrets should never be stored in your source code or exposed in logs. Instead, Azure DevOps recommends using Azure Key Vault for storing secrets. You can link these secrets to your pipelines using variable groups or directly via the Azure Key Vault task.

4. **Follow the Principle of Least Privilege**: When dealing with secrets, always follow the principle of least privilege – only grant access to those who need it.

5. **Regularly Review and Rotate Secrets**: Regularly review and rotate your secrets to minimize the potential damage if a secret is compromised.

By following these practices, you can effectively manage your pipeline configuration and secrets in Azure DevOps.

## Final Thoughts

We've explored some of the best practices for building with Azure Pipelines. We've discussed the importance of structuring your pipelines with modularity, consistency, and granularity in mind. We've also delved into managing pipeline configuration and secrets, emphasizing the use of variable groups and Azure Key Vault.

Practicing and experimenting with Azure Pipelines is crucial to mastering these concepts. The more you use Azure Pipelines, the more comfortable you'll become with its features and nuances. Remember, every pipeline is unique, so don't be afraid to adapt these practices to fit your specific needs.

Looking ahead, we're excited to continue this journey with you. In our next post, we'll dive into deploying with Azure Pipelines. We'll explore how to take the code you've built and tested in your pipelines and deploy it to your environments. Stay tuned and happy coding!
